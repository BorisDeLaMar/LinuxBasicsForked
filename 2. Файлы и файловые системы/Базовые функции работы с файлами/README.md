# 2.1. Базовые функции работы с файлами

Файл - системный интерфейс,а также поименованная последовательность данных вхранилище.
`fread()`, `fopen()` и т.д. - функции языка C для рабооты с файлами. В данном курсе будут рассмотрены **функции ОС** и **системные вызовы** для работы с файлами.
Все системные вызовы описаны в `man 2 cmd_name`.
## Структура файла
Файл - последовательность данных с определенным именем(полный путь). Помимо имени с файлом сопоставлен набор метаатрибутов: время создания и последнего доступа, размер, права доступа и прочее.
`fid = open(имя, флаги)` - получение **файлового дескриптора** на псевдокоде. Он используется для того, чтобы выполнять все остальные операции над данным файлом. То есть далее
```
write(fid,...);
read(fid,...);
close(fid);
```
## Системные вызовы работы с файлами
***Что будет, если командой `ssize_t read()` поппытаться прочитать символы за концом файла(указатель на последнем символе)?***
Эта команда возвращает количество прочитанных байт, поэтому она просто вернет 0. Подробнее можно почитать в `man 2 read`, т.к. вывод `-1` также возможен и в таком случае надо смотреть на значение переменной `errno`.
***Что будет, если сделать write за концом файла?***
Файл будет расширен, если на диске будет достаточно места(и если файл дисковый).
`lseek` - системный вызов для перемещения указателя по файлу.
## Системные вызовы управления файлом
Функция `fcntl()` - file control (NB `man 2 fcntl`).
Advisory locking(параметр fcntl) - синхронизация доступа нескольких приложений к одному и тому же файлу.
## Создание и удаление дискового файла
creat и unlink. Создавать можно и командой open, указав соотвествующий флаг вторым аргументом.


