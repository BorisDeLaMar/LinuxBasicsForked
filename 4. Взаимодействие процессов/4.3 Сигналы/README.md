# Сигналы  
Каждый запускаемый процесс имеет обработчики сигналов. Часть из них стандартные и есть в любом приложении, они попадают в исполняемый файл в момент линковки.   
Если запустим приложение, ожидающее ввод пользователя или имеющее бесконечный цикл, и нажмем ctrl+C, приложение закроется. 
Это отработал один из обработчиков по сигналу, который и завершил приложение.  

Сигналов много, каждый из них имеет **номер**, и это единственная информация, которую можно доставить в приложение в тот момент, когда они возникают.  
Ряд обработчиков сигналов может быть переопределен в приложении, а часть изменить никак нельзя (например, для жесткого завершения процесса).  

Сигналы, обычно, имеют номер или аббревиатуру и определены в файле `signal.h`. 

## Примеры сигналов  
+ SIGINT (№2) - сигнал, посылаемый программе, чтобы ее завершить
+ SIGABRT (№6) - жесткое прерывание программы (это функция `abort`; `man 3 abort`)
+ SIGTERM (№15) - посылается в виде просьбы о завершении программе
+ SIGKILL (№9) - безусловный сигнал (нельзя переопределить), который завершает программу
+ SIGCHLD (№17) - посылается процессу, когда дочерний процесс завершился или был остановлен
+ SIGUSR1 (№10), SIGUSR2 (№12) - пользовательские сигналы, зарезервированные под определение в приложениях
+ SIGSTOP - безусловная приостановка программы

*NB Сигналы - один из основных интерфейсов управления демонами*  

Интерфейс для работы с сигналами и их обработчиками состоит, в основном, из двух функций:
+ `kill` - позволяет отправить сигнал процессу. Такое название говорит о том, что первым сигналом, который приложению требовалось доставить, был сигналом остановки,
 и так исторически сложилось, что название стало синонимом для "отправки сигнала".
*NB **Утилита командной строки** `kill` (`man kill`) по умолчанию отправляет процессу сигнал вежливого завершения процесса*   
+ `signal` - позволяет определить логику того или иного сигнала. Возвращает адрес предыдущего обработчика сигнала.

`kill -l` выведет все сигнал, которые есть в распоряжении.

## Пример переопределения обработчика сигнала
```C
#include <stdio.h>
#include <signal.h>
#include <unistd.h>

void mysignal_handler(int signalno)
{
  printf("Called with %d\n", signalno);
}

int main(int argc, char *argv[])
{
  int c = 0;

  signal(SIGINT, mysignal_handler);

  while(1)
  {
    printf("Hello %d\n", c++);
    usleep(500000);
  }
  return 0;
}
```
При запуске такое программы на ctrl+C программа лишь выведет текст из функции `mysignal_handler`. 
