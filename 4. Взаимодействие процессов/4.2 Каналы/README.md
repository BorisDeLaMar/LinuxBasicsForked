# Каналы  
***Что происходит при создании канала?***  
В ядре создается буфер (поток байт) и два файловых дескриптора (далее ФД) к нему: одни на его начало (на запись), другой - на конец (на чтение). 
Каналы используются для связи приложений друг с другом.  
## Создание связи между родителем и потомком  
1) Создаем канал в родителе
2) Делаем fork(). Через это получим потомка, который будет иметь те же ФД, что и родитель, то есть подключен будет к тому же каналу.
3) Далее опционально. Если хотим, чтобы потомок читал родителя, то в родителе оставляем только ФД на запись (на чтение закрываем), а в потомке - на чтение.

*NB Канал - односторонний вид взаимодействия. Если хотим чтение и запись как родителя, так и потомка, то придется создать два канала по алгоритму выше*  
## Использование неименованных каналов  
1) Создаем с помощью функции `pipe(int pipefd[2])` - `man 2 pipe`. В `pipefd[2]` передаем 2 ФД, соответствующий правому и левому концу этого канала
(на запись и чтение соответственно). 
2) Используем обычные файловые операции для чтения и записи из канала

***Как использовать неименованные каналы из приложения?***  
Использовать `popen` (`man popen`). Возвращает указатель на файл для какой-то команды, запускаемым командным интерпретатором. 
То есть это готовый иструмент для чтения вывода команд, вызывающихся из консоли.  
## Именовынные каналы  
*NB По реализации не отличаются от неименовынных. Это тот же буфер в ядре, работающий по принципу FIFO (first-in-first-out). 
Это значит, что если какой-то блок данных был записан первым в буфер, то и читать мы его будем первым*  

Главное отличие именовынных каналов в том, что у них есть имя в структуре файловых имен.  
То есть мы можем создать имя, которое будет связано не с файлом, а с именовынным каналом. 
Более того, это имя можно создать как из приложения, так и используя утилиту командной строки (`man 3 mkfifo`).  
Если хотим 2 приложения связать именовынным каналом, то можно создать его перед их запуском, а в приложение передать его, например, как аргумент командной строки.  
